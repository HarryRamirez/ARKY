<div class=" cont_quotation container-md">
    <div class="title text-center mb-3">
        <h4>Cotizaciones</h4>
    </div>

    <section class="button d-flex row">
        <div class="col-sm-6 ">
        <button type="button" class="btn btn-primary" routerLink="/dashboard/quotation">Consultar Cotizacion</button>
        </div>

    </section>
    <form class="row" action=""  >
    <section class="container-md bg-body-tertiary col-sm-12">
       <div class=" quot d-flex ">
        <div class="cont">
            <label for="input" class="form-label">Remitente:</label>
            <input id="remitter" [(ngModel)]="quotation.remitter" name="remitter" class="form-control mb-3" type="text"  aria-label="default input example">

            @if (!isChecked()) {
            <label for="input" class="form-label">Cliente:</label>
            <select id="customerId" [(ngModel)]="quotation.customerId" name="customerId" class="form-select" aria-label="Default select example">
                <option selected></option>
                @for(customer of customers; track customer.customerId){
                <option [value]="customer.customerId">{{customer.name}}</option>
                }
              </select>
                                }
                                

            @if(isChecked()){
            <div>
                <label for="input" class="form-label">Cliente:</label>
                <input class="form-control mb-3" type="text"  aria-label="default input example">
                <label for="input" class="form-label">Rut:</label>
                <input class="form-control mb-3" type="text"  aria-label="default input example">
                <label for="input" class="form-label">Telefono:</label>
                <input class="form-control mb-3" type="text"  aria-label="default input example">
                <label for="input" class="form-label">Correo:</label>
                <input class="form-control mb-3" type="email"  aria-label="default input example">
           </div>
                                                 }       
        </div>

        <div class="cont">
            <label for="input" class="form-label">Fecha Emision:</label>
            <input id="dateQuotation" [(ngModel)]="quotation.dateQuotation" name="dateQuotation" class="form-control mb-3" type="date"  aria-label="default input example">
            <label for="exampleFormControlTextarea1" class="form-label">Fecha Evento:</label>
            <input id="dateEvent" [(ngModel)]="quotation.dateEvent" name="dateEvent" class="form-control mb-2" type="date"  aria-label="default input example">

            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" (click)="cambiar()" >
                <label class="form-check-label" for="flexCheckDefault">
                Agregar Cliente
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked">
                <label class="form-check-label" for="flexCheckChecked">
                Exento de Iva
                </label>
            </div>
            <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                <label class="form-check-label" for="flexCheckDefault">
                Solo Valor Total
                </label>
            </div>

            <label for="input" class="form-label">Referencia:</label>
            <input id="reference" [(ngModel)]="quotation.reference" name="reference" class="form-control mb-3" type="text"  aria-label="default input example">
        </div>

        </div>

    </section>





 

    <section >
        <app-item-quot (itemsForm)="onItems($event)" (totalUpdated)="onTotalUpdated($event)" (totalUpdated)="onNetoUpdated($event)" ></app-item-quot>
    </section>




    <div class=" cont_resul container-fluid d-flex mt-5">
        <table class="table_resul table  table-hover table-bordered">
            <tbody>
                <tr>
                    <td>Neto:</td>
                    <td >
                        <input id="neto" [(ngModel)]="neto" name="neto" class="form-control mb-3" type="number"  aria-label="default input example">
                    </td>
                </tr>
                <tr>
                    <td class="desc">Descuento:</td>
                    <td><div class="input-group flex-nowrap">
                        <span class="input-group-text" id="addon-wrapping">%</span>
                        <select id="discountId" [(ngModel)]="quotation.discountId" name="discountId" class="form-select" aria-label="Default select example" (change)="onDiscountSelected($event)">
                            @for(discount of discounts; track discount.discountId){
                            <option [value]="discount.discountId">{{discount.percentage}}</option>
                            }
                          </select>
                      </div></td>
                </tr>
                <tr>
                    <td>Iva:</td>
                    <td>
                        <div class="form-check">
                            <input id="iva" [(ngModel)]="quotation.iva" name="iva" class="form-check-input" type="checkbox"  [value]="0.19" id="flexCheckDefault" (change)="onIvaSelected($event)">
                        </div> 
                    </td>
                </tr>
                <tr>
                    <td>Total:</td>
                    <td >
                        <input [(ngModel)]="totalNeto" name="total" class="form-control mb-3" type="number"  aria-label="default input example">
                         
                        </td>
                </tr>
            </tbody>
        </table>
        </div>
        <div class=" cont_btn_cot mt-5 me-3 pb-3 d-flex">
            <button type="submit" class="btn btn-primary " (click)="saveQuotation()">Ingresar</button>
        </div>
    </form>  
    
    
    <div class="modal modal-sm fade" id="staticBackdrop" data-bs-backdrop="false" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal_success modal-body text-center">
              <img class="alert" src="../../../../assets/icons/success.svg" alt="">
              <h1 class="modal-title fs-3 mb-1" id="staticBackdropLabel">!Guardado con Exito!</h1>
            </div>
          </div>
        </div>
      </div>
</div>

